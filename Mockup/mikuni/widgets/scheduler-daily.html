<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link href="../libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="../libs/jquery/js/jquery-2.1.4.min.js" type="text/javascript"></script>
    <script src="../libs/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <link href="../css/widgets/scheduler-daily.css" rel="stylesheet">
    <style type="text/css">

        table td{border: 1px solid #97B4D1;text-align: left;cursor:pointer;    font-weight: bold;}
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="row"><div class="co-md-2">1224234234</div>
        <div class="co-md-10">fghsdfgsdfg</div></div>
<div class="row">
<div class="co-md-2">
    <table class="table">
    <tr><th></th></tr>
    <tr><th>第1会议室</th></tr>
    <tr><th>第2会议室</th></tr>
    <tr><th>第3会议室</th></tr>
    <tr><th>第4会议室</th></tr>
    <tr><th>第5会议室</th></tr>
    <tr><th>第6会议室</th></tr>
    <tr><th>第7会议室</th></tr>

</table>
</div>
<div class="co-md-10">
    <table id="scheculer-daily" class="table">
        <tr>
            <th></th>
            <th colspan="4">0时</th>
            <th colspan="4">1时</th>
            <th colspan="4">2时</th>
            <th colspan="4">3时</th>
            <th colspan="4">4时</th>
            <th colspan="4">5时</th>
            <th colspan="4">6时</th>
            <th colspan="4">7时</th>
            <th colspan="4">8时</th>
            <th colspan="4">9时</th>
            <th colspan="4">10时</th>
            <th colspan="4">11时</th>
            <th colspan="4">12时</th>
            <th colspan="4">13时</th>
            <th colspan="4">14时</th>
            <th colspan="4">15时</th>
            <th colspan="4">16时</th>
            <th colspan="4">17时</th>
            <th colspan="4">18时</th>
            <th colspan="4">19时</th>
            <th colspan="4">20时</th>
            <th colspan="4">21时</th>
            <th colspan="4">22时</th>
            <th colspan="4">23时</th>
        </tr>
        <tr id="r1">
            <th>第一会议室</th>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
        </tr>
        <tr id="r2">
            <th>第二会议室</th>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
        </tr>
        <tr id="r3">
            <th>3</th>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
        </tr>
        <tr id="r4">
            <th>4</th>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
            <td></td><td></td><td></td><td></td>
        </tr>
        <tr>
            <th>5</th>
        </tr>
        <tr>
            <th>6</th>
        </tr>
        <tr>
            <th>7</th>
        </tr>
    </table></div>
</div>
</div>

<div class="modal fade" id="settingModal" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    预约框
                </h4>
            </div>
            <div class="modal-body">
                在这里添加一些文本
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary" onclick="doSetting()">
                    提交更改
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<p id ='log'></p>
<script type="text/javascript">
    var selectecdlog = [];
    var resultLen = 0;
    var resultBegin = 0;
    var backColor = ['red','green','blue']; // assume 3 rows 1 -red 2 - green 3 - blue
    var resultColor =0;
    var selectedColor = '#7CB0DC';
    // set id attr for each td
    $("td").each(function(index, val){
        /* iterate through array or object */
        $(this).attr('id', $(this).parent().attr('id')+'c'+($(this).index()+1))});
    $("td").mousedown(onMouseDown);
    function onMouseDown(){

        selectecdlog = [];
        //resultColor = backColor[$(this).parent().attr('id').substr(1)-1];
        //$('td').css('background-color', 'white');
        // ID for tr tag
        //alert($(this).parent().attr('id'));
        //get the column No.
        //alert($(this).index()+1);
        $(this).css('background-color', selectedColor);
        selectecdlog.push($(this).attr('id'));
        //alert($(this).attr('id'));
        $("td").mouseup(onMouseUp);
        $("td").mouseover(onMouseOver);
    }

    function onMouseUp(){
        /* Act on the event */
        var len =resultLen= Math.abs(parseInt(selectecdlog[0].substr(selectecdlog[0].indexOf('c')+1)) - parseInt($(this).attr('id').substr(($(this).attr('id').indexOf('c'))+1)))+1;
        var begin =resultBegin= parseInt(selectecdlog[0].substr(selectecdlog[0].indexOf('c')+1)) >parseInt($(this).attr('id').substr(($(this).attr('id').indexOf('c'))+1)) ? parseInt($(this).attr('id').substr(($(this).attr('id').indexOf('c'))+1)):parseInt(selectecdlog[0].substr(selectecdlog[0].indexOf('c')+1));
        for(var i =0; i<resultLen;i++) {
            selectecdlog.push(selectecdlog[0].substr(0,2)+"c"+(resultBegin+i));
        }
        selectecdlog.shift();
        $('#log').text(selectecdlog.toString());

        $("td").unbind('mouseover',onMouseOver);
        $("td").unbind('mouseup',onMouseUp);

        $('#settingModal').modal('show');
    }
    function onMouseOver (argument) {
        var len =resultLen= Math.abs(parseInt(selectecdlog[0].substr(selectecdlog[0].indexOf('c')+1)) - parseInt($(this).attr('id').substr(($(this).attr('id').indexOf('c'))+1)))+1;
        var begin =resultBegin= parseInt(selectecdlog[0].substr(selectecdlog[0].indexOf('c')+1)) >parseInt($(this).attr('id').substr(($(this).attr('id').indexOf('c'))+1)) ? parseInt($(this).attr('id').substr(($(this).attr('id').indexOf('c'))+1)):parseInt(selectecdlog[0].substr(selectecdlog[0].indexOf('c')+1));
        // $('td').css('background-color', 'white');
        for(var i =0; i<len;i++)
        {
            $('#'+selectecdlog[0].substr(0,2)+"c"+(begin+i)).css('background-color', selectedColor);
        }
        //alert( $(this).attr('id').substr(($(this).attr('id').indexOf('c'))+1));
        //$('#'+tdId).css('background-color', 'red');


    }

    //combine cells
    function doSetting () {
        // body...
        for (var m in selectecdlog)
        {
            if(m==0)
            {
                $('#'+selectecdlog[m]).attr('colspan', resultLen);
                $('#'+selectecdlog[m]).css('width',resultLen*17+"px");
                //$('#'+selectecdlog[m]).css('background-color', 'bule');
                $('#'+selectecdlog[m]).html("已选择");//= '已选择';

            }
            else{
                $('#'+selectecdlog[m]).addClass('hidden');
            }
            $('#'+selectecdlog[m]).unbind('mousedown',onMouseDown);
        }
        $('#settingModal').modal('hide');
    }
</script>

</body>


</html>